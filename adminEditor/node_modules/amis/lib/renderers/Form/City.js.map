{
    "version": 3,
    "file": "City.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Form/City.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {FormItem, FormControlProps} from './Item';\nimport db, {province, city, district} from './CityDB';\nimport {ClassNamesFn, themeable} from '../../theme';\nimport {Select} from '../../components';\nimport {autobind} from '../../utils/helper';\nimport {Option} from './Options';\nimport {localeable, LocaleProps} from '../../locale';\n\nexport interface CityPickerProps extends LocaleProps {\n  value: any;\n  onChange: (value: any) => void;\n  extractValue: boolean;\n  joinValues?: boolean;\n  delimiter: string;\n  classnames: ClassNamesFn;\n  classPrefix: string;\n  className?: string;\n  disabled?: boolean;\n  allowCity: boolean;\n  allowDistrict: boolean;\n  allowStreet: boolean;\n}\n\nexport interface CityPickerState {\n  code: number;\n  province: string;\n  provinceCode: number;\n  city: string;\n  cityCode: number;\n  district: string;\n  districtCode: number;\n  street: string;\n}\n\nexport class CityPicker extends React.Component<\n  CityPickerProps,\n  CityPickerState\n> {\n  static defaultProps = {\n    joinValues: true,\n    extractValue: true,\n    delimiter: ',',\n    allowCity: true,\n    allowDistrict: true,\n    allowStreet: false\n  };\n\n  state = {\n    code: 0,\n    province: '',\n    provinceCode: 0,\n    city: '',\n    cityCode: 0,\n    district: '',\n    districtCode: 0,\n    street: ''\n  };\n\n  componentDidMount() {\n    this.syncIn();\n  }\n\n  componentDidUpdate(prevProps: CityPickerProps) {\n    const props = this.props;\n\n    if (props.value !== prevProps.value) {\n      this.syncIn(props);\n    }\n  }\n\n  @autobind\n  handleProvinceChange(option: Option) {\n    this.setState(\n      {\n        province: option.label as string,\n        provinceCode: option.value as number,\n        city: '',\n        cityCode: 0,\n        district: '',\n        districtCode: 0,\n        street: '',\n        code: option.value\n      },\n      this.syncOut\n    );\n  }\n\n  @autobind\n  handleCityChange(option: Option) {\n    if (option.value % 100) {\n      return this.handleDistrictChange(option, {\n        cityCode: option.value as number\n      });\n    }\n\n    this.setState(\n      {\n        city: option.label as string,\n        cityCode: option.value as number,\n        district: '',\n        districtCode: 0,\n        street: '',\n        code: option.value\n      },\n      this.syncOut\n    );\n  }\n\n  @autobind\n  handleDistrictChange(\n    option: Option,\n    otherStates: Partial<CityPickerState> = {}\n  ) {\n    this.setState(\n      {\n        ...(otherStates as any),\n        district: option.label as string,\n        districtCode: option.value as number,\n        street: '',\n        code: option.value as number\n      },\n      this.syncOut\n    );\n  }\n\n  @autobind\n  handleStreetChange(e: React.ChangeEvent<HTMLInputElement>) {\n    this.setState({\n      street: e.currentTarget.value\n    });\n  }\n\n  @autobind\n  handleStreetEnd() {\n    this.syncOut();\n  }\n\n  @autobind\n  syncIn(props = this.props) {\n    const {value, delimiter} = props;\n\n    const state = {\n      code: 0,\n      province: '',\n      provinceCode: 0,\n      city: '',\n      cityCode: 0,\n      district: '',\n      districtCode: 0,\n      street: ''\n    };\n\n    let code =\n      (value && value.code) ||\n      (typeof value === 'number' && value) ||\n      (typeof value === 'string' && /(\\d{6})/.test(value) && RegExp.$1);\n\n    if (code && db[code]) {\n      code = parseInt(code, 10);\n      state.code = code;\n\n      const provinceCode = code - (code % 10000);\n      if (db[provinceCode]) {\n        state.provinceCode = provinceCode;\n        state.province = db[provinceCode];\n      }\n\n      const cityCode = code - (code % 100);\n      if (db[cityCode]) {\n        state.cityCode = cityCode;\n        state.city = db[cityCode];\n      }\n\n      if (code % 100) {\n        state.district = db[code];\n        state.districtCode = code;\n      }\n    } else if (value) {\n      // todo 模糊查找\n    }\n\n    if (value && value.street) {\n      state.street = value.street;\n    } else if (typeof value === 'string' && ~value.indexOf(delimiter)) {\n      state.street = value.slice(value.indexOf(delimiter) + delimiter.length);\n    }\n\n    this.setState(state);\n  }\n\n  @autobind\n  syncOut() {\n    const {\n      onChange,\n      allowStreet,\n      joinValues,\n      extractValue,\n      delimiter\n    } = this.props;\n\n    const {code, province, city, district, street} = this.state;\n\n    if (typeof extractValue === 'undefined' ? joinValues : extractValue) {\n      code\n        ? onChange(\n            allowStreet && street\n              ? [code, street].join(delimiter)\n              : String(code)\n          )\n        : onChange('');\n    } else {\n      onChange({\n        code,\n        province,\n        city,\n        district,\n        street\n      });\n    }\n  }\n\n  render() {\n    const {\n      classnames: cx,\n      className,\n      disabled,\n      allowCity,\n      allowDistrict,\n      allowStreet,\n      translate: __\n    } = this.props;\n\n    const {provinceCode, cityCode, districtCode, street} = this.state;\n\n    return (\n      <div className={cx('CityPicker', className)}>\n        <Select\n          disabled={disabled}\n          options={province.map(item => ({\n            label: db[item],\n            value: item\n          }))}\n          value={provinceCode}\n          onChange={this.handleProvinceChange}\n        />\n\n        {provinceCode &&\n        allowDistrict &&\n        Array.isArray(district[provinceCode]) ? (\n          <Select\n            disabled={disabled}\n            options={(district[provinceCode] as Array<number>).map(item => ({\n              label: db[item],\n              value: item\n            }))}\n            value={districtCode}\n            onChange={this.handleDistrictChange}\n          />\n        ) : allowCity && city[provinceCode] && city[provinceCode].length ? (\n          <Select\n            disabled={disabled}\n            options={city[provinceCode].map(item => ({\n              label: db[item],\n              value: item\n            }))}\n            value={cityCode}\n            onChange={this.handleCityChange}\n          />\n        ) : null}\n\n        {cityCode &&\n        allowDistrict &&\n        district[provinceCode] &&\n        district[provinceCode][cityCode] ? (\n          <Select\n            disabled={disabled}\n            options={(district[provinceCode][cityCode] as Array<number>).map(\n              item => ({\n                label: db[item],\n                value: item\n              })\n            )}\n            value={districtCode}\n            onChange={this.handleDistrictChange}\n          />\n        ) : null}\n\n        {allowStreet && provinceCode ? (\n          <input\n            className={cx('CityPicker-input')}\n            value={street}\n            onChange={this.handleStreetChange}\n            onBlur={this.handleStreetEnd}\n            placeholder={__('请输入街道信息')}\n          />\n        ) : null}\n      </div>\n    );\n  }\n}\n\nconst ThemedCity = themeable(localeable(CityPicker));\nexport default ThemedCity;\n\nexport interface LocationControlProps extends FormControlProps {\n  allowCity?: boolean;\n  allowDistrict?: boolean;\n  extractValue?: boolean;\n  joinValues?: boolean;\n  allowStreet?: boolean;\n}\nexport class LocationControl extends React.Component<LocationControlProps> {\n  render() {\n    const {\n      value,\n      onChange,\n      allowCity,\n      allowDistrict,\n      extractValue,\n      joinValues,\n      allowStreet\n    } = this.props;\n    return (\n      <ThemedCity\n        value={value}\n        onChange={onChange}\n        allowCity={allowCity}\n        allowDistrict={allowDistrict}\n        extractValue={extractValue}\n        joinValues={joinValues}\n        allowStreet={allowStreet}\n      />\n    );\n  }\n}\n\n@FormItem({\n  type: 'city',\n  sizeMutable: false\n})\nexport class CheckboxControlRenderer extends LocationControl {}\n"
    ]
}