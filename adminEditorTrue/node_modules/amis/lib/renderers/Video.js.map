{
    "version": 3,
    "file": "Video.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Video.tsx"
    ],
    "names": [],
    "mappings": ";AAAA;;;GAGG;;;AAEH,wDAA0B;AAE1B,2CAOqB;AACrB,0CAAuC;AACvC,kEAA4B;AAC5B,sCAAmD;AACnD,oDAAqD;AACrD,oCAAoC;AACpC,aAAa;AACb,4CAA0C;AAE1C,IAAM,WAAW,GAA4B,UAAA,GAAG;IAC9C,OAAA,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC;QACd,CAAC,CAAC,GAAG;aACA,KAAK,CAAC,GAAG,CAAC;aACV,OAAO,EAAE;aACT,MAAM,CACL,UAAC,OAAO,EAAE,KAAK,EAAE,KAAK;YACpB,OAAA,OAAO,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,KAAK,CAAC;QAA1D,CAA0D,EAC5D,CAAC,CACF;QACL,CAAC,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC;AATrB,CASqB,CAAC;AAcxB,kCAAkC;AAElC;IAA+B,qCAAoC;IAAnE;;IAyEA,CAAC;IAvEC,qCAAiB,GAAjB;QAAA,iBAyDC;QAxDK,IAAA,eAAqE,EAApE,YAAG,EAAE,gBAAK,EAAE,kBAAM,EAAE,oBAAO,EAAE,kBAAM,EAAE,sBAAQ,EAAE,oBAAqB,CAAC;QAEzE,OAAe,CAAC,CAAC,QAAQ,CAAC,EAAE,UAAC,KAAU;YACtC,uCAAuC;YACvC,IAAI,KAAK,CAAC,WAAW,EAAE,EAAE;gBACvB,KAAK,GAAG,KAAK,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBAExD,IAAI,WAAS,GAAG,KAAK,CAAC,YAAY,CAChC;oBACE,IAAI,EAAE,KAAK;oBACX,GAAG,EAAE,GAAG;oBACR,MAAM,EAAE,MAAM;iBACf,EACD,MAAM,CACP,CAAC;gBACF,WAAS,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;gBACpC,KAAI,CAAC,SAAS,GAAG,WAAS,CAAC;gBAC3B,IAAI,QAAM,GAAG,KAAK,CAAC;gBACnB,IAAI,OAAU,CAAC;gBAEf,OAAO,CAAC,+BAA+B,CAAC,UAAC,SAAc;oBACrD,IAAM,IAAI,GAAG,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC;oBAExC,IAAI,IAAI,KAAK,MAAM,EAAE;wBACnB,YAAY,CAAC,OAAK,CAAC,CAAC;wBACpB,IAAI,CAAC,QAAM,EAAE;4BACX,QAAM,GAAG,IAAI,CAAC;4BACd,WAAS,CAAC,IAAI,EAAE,CAAC;yBAClB;wBAED,WAAS,CAAC,IAAI,EAAE,CAAC;qBAClB;yBAAM,IAAI,IAAI,KAAK,OAAO,EAAE;wBAC3B,WAAS,CAAC,KAAK,EAAE,CAAC;wBAElB,IAAI,MAAM,EAAE;4BACV,OAAK,GAAG,UAAU,CAAC;gCACjB,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gCAChB,WAAS,CAAC,MAAM,EAAE,CAAC;gCACnB,QAAM,GAAG,KAAK,CAAC;4BACjB,CAAC,EAAE,KAAK,CAAC,CAAC;yBACX;qBACF;gBACH,CAAC,CAAC,CAAC;gBAEH,WAAS,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,mBAAmB,EAAE;oBAC7C,KAAK,CAAC,QAAQ,CAAC,CAAC;gBAClB,CAAC,CAAC,CAAC;gBACH,WAAS,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE;oBAC/B,KAAK,CAAC,QAAQ,CAAC,CAAC;gBAClB,CAAC,CAAC,CAAC;gBAEH,IAAI,QAAQ,EAAE;oBACZ,UAAU,CAAC,cAAM,OAAA,OAAO,CAAC,IAAI,EAAE,EAAd,CAAc,EAAE,GAAG,CAAC,CAAC;iBACvC;aACF;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,wCAAoB,GAApB;QACE,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC;YACxB,IAAI,CAAC,SAAS,CAAC,kBAAkB,EAAE,CAAC;SACrC;IACH,CAAC;IAED,0BAAM,GAAN;QACE,OAAO,CACL,0CAAQ,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,aAAa,GAAI,CACxE,CAAC;IACJ,CAAC;IACH,gBAAC;AAAD,CAAC,AAzED,CAA+B,eAAK,CAAC,SAAS,GAyE7C;AAzEY,8BAAS;AAsFtB;IAA+B,qCAAoC;IAAnE;;IAuDA,CAAC;IArDC,qCAAiB,GAAjB;QAAA,iBAoCC;QAnCK,IAAA,eAAqE,EAApE,YAAG,EAAE,gBAAK,EAAE,kBAAM,EAAE,oBAAO,EAAE,kBAAM,EAAE,sBAAQ,EAAE,oBAAqB,CAAC;QAEzE,OAAe,CAAC,CAAC,QAAQ,CAAC,EAAE,UAAC,GAAQ;YACpC,uCAAuC;YACvC,IAAI,GAAG,CAAC,WAAW,EAAE,EAAE;gBACrB,KAAK,GAAG,KAAK,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBAExD,IAAI,KAAG,GAAG,CAAC,KAAI,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC;oBAC5B,aAAa,EAAE,KAAK;iBACrB,CAAC,CAAC,CAAC;gBACJ,KAAG,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;gBACvB,KAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;gBAEpB,IAAI,QAAM,GAAG,KAAK,CAAC;gBAEnB,OAAO,CAAC,+BAA+B,CAAC,UAAC,SAAc;oBACrD,IAAM,IAAI,GAAG,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC;oBAExC,IAAI,IAAI,KAAK,MAAM,EAAE;wBACnB,IAAI,CAAC,QAAM,EAAE;4BACX,QAAM,GAAG,IAAI,CAAC;4BACd,KAAG,CAAC,SAAS,EAAE,CAAC;yBACjB;wBAED,KAAK,CAAC,IAAI,EAAE,CAAC;qBACd;yBAAM,IAAI,IAAI,KAAK,OAAO,EAAE;wBAC3B,KAAK,CAAC,KAAK,EAAE,CAAC;wBACd,KAAG,CAAC,QAAQ,EAAE,CAAC;wBACf,QAAM,GAAG,KAAK,CAAC;qBAChB;gBACH,CAAC,CAAC,CAAC;gBAEH,QAAQ,IAAI,UAAU,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;aAC3C;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,wCAAoB,GAApB;QACE,IAAI,IAAI,CAAC,GAAG,EAAE;YACZ,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;YACpB,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;SACxB;IACH,CAAC;IAED,0BAAM,GAAN;QACE,OAAO,CACL,0CACE,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,EACnB,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,uBAAuB,GAChD,CACH,CAAC;IACJ,CAAC;IACH,gBAAC;AAAD,CAAC,AAvDD,CAA+B,eAAK,CAAC,SAAS,GAuD7C;AAvDY,8BAAS;AAuEtB;IAAmC,iCAAuC;IAaxE,eAAY,KAAiB;QAA7B,YACE,kBAAM,KAAK,CAAC,SAYb;QAVC,KAAI,CAAC,KAAK,GAAG;YACX,UAAU,EAAE,IAAI;YAChB,UAAU,EAAE,EAAE;SACf,CAAC;QAEF,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;QACzC,KAAI,CAAC,SAAS,GAAG,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;QAC3C,KAAI,CAAC,SAAS,GAAG,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;QAC3C,KAAI,CAAC,aAAa,GAAG,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;QACnD,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;;IACzC,CAAC;IAED,6BAAa,GAAb,UAAc,CAAQ;QAAtB,iBAYC;QAXC,IAAI,KAAK,GAAQ,IAAI,KAAK,EAAE,CAAC;QAC7B,KAAK,CAAC,MAAM,GAAG;YACb,KAAI,CAAC,QAAQ,CAAC;gBACZ,UAAU,EAAE;oBACV,KAAK,EAAE,KAAK,CAAC,KAAK;oBAClB,MAAM,EAAE,KAAK,CAAC,MAAM;iBACrB;aACF,CAAC,CAAC;YACH,KAAK,GAAG,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;QAC9B,CAAC,CAAC;QACF,KAAK,CAAC,GAAG,GAAI,CAAC,CAAC,MAAsB,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;IAC5D,CAAC;IAED,wBAAQ,GAAR,UAAS,GAAQ;QACf,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;IACtB,CAAC;IAED,yBAAS,GAAT,UAAU,GAAQ;QAChB,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;IACvB,CAAC;IAED,yBAAS,GAAT,UAAU,MAAW;QAArB,iBA+CC;QA9CC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QAErB,IAAI,CAAC,MAAM,EAAE;YACX,OAAO;SACR;QAED,MAAM,CAAC,sBAAsB,CAAC,UAAC,KAAU;YACvC,KAAI,CAAC,QAAQ,CAAC;gBACZ,UAAU,EAAE,KAAK;aAClB,CAAC,CAAC;YAEH,uBAAuB;YACvB,SAAS;YACT,wBAAwB;YACxB,8BAA8B;YAC9B,gCAAgC;YAChC,QAAQ;YACR,8BAA8B;YAC9B,MAAM;YAEN,6BAA6B;YAC7B,IAAI;YAEJ,IAAI,CAAC,KAAI,CAAC,QAAQ,IAAI,CAAC,KAAI,CAAC,KAAK,EAAE;gBACjC,OAAO;aACR;YAED,IAAM,kBAAkB,GAAG,KAAI,CAAC,KAAK,CAAC,kBAAkB,IAAI,CAAC,CAAC;YAC9D,IAAI,KAAK,GAAG,CAAC,CAAC;YACd,IAAM,KAAK,GAAG,KAAI,CAAC,KAAK,CAAC;YACzB,IAAM,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC;YACzB,OAAO,KAAK,GAAG,GAAG,GAAG,CAAC,EAAE;gBACtB,IACE,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;oBAChB,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,kBAAkB,EACzD;oBACA,MAAM;iBACP;gBAED,KAAK,EAAE,CAAC;aACT;YAED,IAAI,KAAI,CAAC,YAAY,KAAK,KAAK,EAAE;gBAC/B,KAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;aAC/B;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,iCAAiB,GAAjB,UAAkB,KAAa;QACtB,IAAA,2BAAe,CAAe;QACrC,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACrC,OAAO;SACR;QACD,IAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,MAAI,EAAE,gBAAa,CAAC,CAAC;QAElE,IAAI,KAAK,IAAI,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,KAAK,CAAC,EAAE;YACzC,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1B,IAAM,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;YAC1B,IAAM,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAE,CAAC;YACxD,IAAM,IAAI,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAC1C,IAAI,CAAC,SAAS,CAAC,YAAY,CACzB,OAAO,EACP,aAAU,IAAI,CAAC,KAAK,GAAG,CAAC,sBAAe,IAAI,CAAC,MAAM,GAAG,CAAC,oBACpD,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,SAAS,CAAC,IAAI,mBACpB,IAAI,CAAC,GAAG,GAAG,CAAC,GAAG,SAAS,CAAC,GAAG,SAAK,CAC9C,CAAC;SACH;IACH,CAAC;IAED,2BAAW,GAAX,UAAY,KAAa;QACvB,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE;YACxD,OAAO;SACR;QACD,IAAM,kBAAkB,GAAG,IAAI,CAAC,KAAK,CAAC,kBAAkB,IAAI,CAAC,CAAC;QAC9D,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACzB,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAE3B,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,kBAAkB,CAAC,CAAC;QAC/C,MAAM,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC;IAED,uBAAO,GAAP,UAAQ,CAAQ;QACd,mBAAmB;QACnB,CAAC,CAAC,cAAc,EAAE,CAAC;IACrB,CAAC;IAED,4BAAY,GAAZ;QAAA,iBAmFC;QAlFK,IAAA,eAOU,EANZ,kBAAM,EACN,oCAAe,EACf,8BAAY,EACZ,cAAI,EACJ,wBAAS,EACT,mBACY,CAAC;QAEf,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;YACnD,MAAM,GAAG,6BAAe,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;SACxC;QAED,IAAI,CAAC,MAAM,EAAE;YACX,OAAO,IAAI,CAAC;SACb;QAED,IAAM,KAAK,GAAkB,EAAE,CAAC;QAChC,IAAM,KAAK,GAAkB,CAAC,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC;QAC/C,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAA,IAAI;YAC9B,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;YAE9B,KAAK,CAAC,IAAI,CAAC;gBACT,IAAI,EAAE,IAAI;gBACV,GAAG,EAAE,MAAM,CAAC,IAAI,CAAC;aAClB,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;YACjB,OAAO,IAAI,CAAC;SACb;QAED,OAAO,CACL,uCACE,SAAS,EAAE,oBAAE,CAAC,aAAW,EAAE,oBAAiB,EAAE,eAAe,CAAC,EAC9D,GAAG,EAAE,IAAI,CAAC,QAAQ;YAEjB,eAAM,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC,GAAG,CAAC,UAAC,KAAK,EAAE,CAAC;gBACxC,IAAI,SAAS,GAAI,YAAuB,GAAG,KAAK,CAAC,MAAM,CAAC;gBACxD,IAAI,UAAU,GAAG,EAAE,CAAC;gBAEpB,OAAO,SAAS,EAAE,EAAE;oBAClB,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBACrB;gBAED,OAAO,CACL,uCAAK,SAAS,EAAC,aAAa,EAAC,GAAG,EAAE,CAAC;oBACjC,uCAAK,SAAS,EAAK,EAAE,aAAQ,EAAE,oBAAiB;wBAC7C,KAAK,CAAC,GAAG,CAAC,UAAC,IAAI,EAAE,GAAG,IAAK,OAAA,CACxB,uCACE,SAAS,EAAK,EAAE,8BAAyB,EAAE,gBAAa,EACxD,GAAG,EAAE,GAAG,EACR,OAAO,EAAE;gCACP,OAAA,KAAI,CAAC,WAAW,CAAC,CAAC,GAAI,YAAuB,GAAG,GAAG,CAAC;4BAApD,CAAoD;4BAGrD,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CACV,uCAAK,SAAS,EAAC,QAAQ,EAAC,GAAG,EAAC,QAAQ,EAAC,GAAG,EAAE,IAAI,CAAC,GAAG,GAAI,CACvD,CAAC,CAAC,CAAC,IAAI;4BACR,uCAAK,SAAS,EAAK,EAAE,qBAAkB,IAAG,IAAI,CAAC,IAAI,CAAO,CACtD,CACP,EAbyB,CAazB,CAAC;wBAGA,UAAU,CAAC,SAAS;4BAClB,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,UAAC,CAAC,EAAE,KAAK,IAAK,OAAA,CAC3B,uCACE,SAAS,EAAK,EAAE,0BAAuB,EACvC,GAAG,EAAE,WAAS,KAAO,GACrB,CACH,EAL4B,CAK5B,CAAC;4BACJ,CAAC,CAAC,IAAI,CAEN,CACF,CACP,CAAC;YACJ,CAAC,CAAC;YACD,SAAS,CAAC,CAAC,CAAC,CACX,wCAAM,GAAG,EAAE,IAAI,CAAC,SAAS,EAAE,SAAS,EAAK,EAAE,iBAAc,GAAI,CAC9D,CAAC,CAAC,CAAC,IAAI,CACJ,CACP,CAAC;IACJ,CAAC;IAED,4BAAY,GAAZ;QACM,IAAA,eAeU,EAdZ,kBAAM,EACN,sBAAQ,EACR,gBAAK,EACL,cAAI,EACJ,cAAI,EACJ,0BAAU,EACV,kBAAM,EACN,kBAAM,EACN,sCAAgB,EAChB,wBAAS,EACT,oCAAe,EACf,mBAAe,EACf,4BAAW,EACX,gBACY,CAAC;QAEf,IAAI,MAAM,GACR,IAAI,CAAC,KAAK,CAAC,GAAG;YACd,CAAC,IAAI,IAAI,IAAI,IAAK,IAAY,CAAC,IAAI,CAAC,CAAC;YACrC,CAAC,UAAU,IAAI,UAAU,CAAC,KAAK,CAAC,CAAC;QACnC,IAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;QACzC,IAAI,SAAS,GACX,UAAU,CAAC,QAAQ;YACnB,gBAAgB;YAChB,UAAU,CAAC,QAAQ,GAAG,gBAAgB,CAAC;QACzC,IAAI,GAAG,GAAG,YAAM,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;QACxC,IAAI,UAAU,CAAC;QAEf,IACE,CAAC,GAAG,IAAI,eAAe,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC;YAC5C,SAAS,KAAK,aAAa,EAC3B;YACA,UAAU,GAAG,CACX,8BAAC,SAAS,IACR,QAAQ,EAAE,QAAQ,EAClB,KAAK,EAAE,KAAK,EACZ,MAAM,EAAE,MAAM,EACd,GAAG,EAAE,GAAG,GACR,CACH,CAAC;SACH;aAAM,IACL,CAAC,GAAG,IAAI,gBAAgB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YACnC,SAAS,KAAK,uBAAuB,EACrC;YACA,UAAU,GAAG,8BAAC,SAAS,IAAC,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,GAAI,CAAC;SACxE;aAAM;YACL,UAAU,GAAG,0CAAQ,GAAG,EAAE,GAAG,GAAI,CAAC;SACnC;QAED,OAAO,CACL,uCAAK,SAAS,EAAE,eAAe;YAC7B,8BAAC,oBAAM,IACL,GAAG,EAAE,IAAI,CAAC,SAAS,EACnB,MAAM,EAAE,YAAM,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,EACrC,GAAG,EAAE,GAAG,EACR,QAAQ,EAAE,QAAQ,EAClB,KAAK,EAAE,KAAK,EACZ,WAAW,EAAE,WAAW;gBAEvB,KAAK,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CACvB,8BAAC,wBAAU;oBACT,8BAAC,oCAAsB,IAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,GAAI,CACzC,CACd,CAAC,CAAC,CAAC,IAAI;gBACR,8BAAC,2BAAa,IAAC,QAAQ,EAAC,QAAQ,GAAG;gBAClC,UAAU;gBACX,8BAAC,sBAAQ,IAAC,QAAQ,SAAG,CACd;YAER,SAAS,CAAC,CAAC,CAAC,CACX,qCAAG,SAAS,EAAE,YAAU,EAAE,iBAAc;;gBAC9B,gBAAgB;0BACtB,CACL,CAAC,CAAC,CAAC,IAAI,CACJ,CACP,CAAC;IACJ,CAAC;IAED,qCAAqB,GAArB;QACM,IAAA,eAAuE,EAAtE,kBAAM,EAAE,cAAI,EAAE,kBAAM,EAAE,0CAAkB,EAAE,kBAA4B,CAAC;QAC5E,IAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,EAAE,CAAC;QAC/C,IAAI,kBAAkB,GAAG,EAAE,CAAC;QAE5B,IACE,UAAU;YACV,kBAAkB;YAClB,CAAC,kBAAkB,CAAC,KAAK,IAAI,kBAAkB,CAAC,MAAM,CAAC;YACvD,CAAC,kBAAkB,CAAC,KAAK,GAAG,UAAU,CAAC,KAAK;gBAC1C,kBAAkB,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,EAChD;YACA,kBAAkB,GAAG,cAAc,CAAC;SACrC;QAED,OAAO,CACL,uCAAK,SAAS,EAAC,YAAY;YACzB,uCAAK,SAAS,EAAE,EAAE,CAAC,MAAM,CAAC;gBACxB,uCAAK,SAAS,EAAE,EAAE,CAAC,UAAU,CAAC;oBAC5B,uCAAK,SAAS,EAAE,EAAE,CAAC,qBAAqB,CAAC;wBACvC,uCACE,MAAM,EAAE,IAAI,CAAC,aAAoB,EACjC,SAAS,EAAC,QAAQ,EAClB,GAAG,EAAC,QAAQ,EACZ,GAAG,EAAE,YAAM,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,GAClC;wBACF,qCAAG,SAAS,EAAC,QAAQ;;4BAChB,GAAG;4BACN,wCAAM,SAAS,EAAE,kBAAkB;gCAChC,UAAU,CAAC,KAAK,IAAI,GAAG;;gCAAK,UAAU,CAAC,MAAM,IAAI,GAAG,CAChD;4BACN,kBAAkB,CAAC,CAAC,CAAC,CACpB;gCACG,GAAG;;gCACG,GAAG;gCACV,wCAAM,SAAS,EAAE,EAAE,CAAC,cAAc,CAAC;oCAChC,kBAAkB,CAAC,KAAK,IAAI,GAAG;;oCAAI,GAAG;oCACtC,kBAAkB,CAAC,MAAM,IAAI,GAAG,CAC5B,CACF,CACR,CAAC,CAAC,CAAC,IAAI,CACN,CACA,CACF;gBACN,uCAAK,SAAS,EAAE,EAAE,CAAC,UAAU,CAAC;oBAC5B,uCAAK,SAAS,EAAE,EAAE,CAAC,qBAAqB,CAAC,IACtC,IAAI,CAAC,YAAY,EAAE,CAChB,CACF,CACF,CACF,CACP,CAAC;IACJ,CAAC;IAED,sBAAM,GAAN;QACM,IAAA,eAAsD,EAArD,4BAAW,EAAE,wBAAS,EAAE,mBAA6B,CAAC;QAE3D,OAAO,CACL,uCACE,SAAS,EAAE,oBAAE,CAAI,EAAE,UAAO,EAAE,SAAS,CAAC,EACtC,OAAO,EAAE,IAAI,CAAC,OAAc;YAE3B,IAAI,CAAC,YAAY,EAAE;YACnB,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,EAAE,CAC7D,CACP,CAAC;IACJ,CAAC;IA/WM,kBAAY,GAAG;QACpB,YAAY,EAAE,CAAC;QACf,MAAM,EAAE,KAAK;QACb,SAAS,EAAE,IAAI;QACf,WAAW,EAAE,MAAM;KACpB,CAAC;IA2WJ,YAAC;CAAA,AAjXD,CAAmC,eAAK,CAAC,SAAS,GAiXjD;kBAjXoB,KAAK;AAuX1B;IAAmC,yCAAK;IAAxC;;IAA0C,CAAC;IAA9B,aAAa;QAJzB,kBAAQ,CAAC;YACR,IAAI,EAAE,cAAc;YACpB,IAAI,EAAE,OAAO;SACd,CAAC;OACW,aAAa,CAAiB;IAAD,oBAAC;CAAA,AAA3C,CAAmC,KAAK,GAAG;AAA9B,sCAAa",
    "sourcesContent": [
        "/**\n * @file video\n * @author fex\n */\n\nimport React from 'react';\n\nimport {\n  Player,\n  Shortcut,\n  BigPlayButton,\n  ControlBar,\n  PlaybackRateMenuButton\n  // @ts-ignore\n} from 'video-react';\nimport {padArr} from '../utils/helper';\nimport cx from 'classnames';\nimport {Renderer, RendererProps} from '../factory';\nimport {resolveVariable} from '../utils/tpl-builtin';\nimport {filter} from '../utils/tpl';\n// import css\nimport 'video-react/dist/video-react.css';\n\nconst str2seconds: (str: string) => number = str =>\n  str.indexOf(':')\n    ? str\n        .split(':')\n        .reverse()\n        .reduce(\n          (seconds, value, index) =>\n            seconds + (parseInt(value, 10) || 0) * Math.pow(60, index),\n          0\n        )\n    : parseInt(str, 10);\n\nexport interface FlvSourceProps {\n  src?: string;\n  type?: string;\n  video?: any;\n  config?: object;\n  manager?: any;\n  isLive?: boolean;\n  autoPlay?: boolean;\n  actions?: any;\n  order?: number;\n}\n\n// let currentPlaying: any = null;\n\nexport class FlvSource extends React.Component<FlvSourceProps, any> {\n  flvPlayer: any;\n  componentDidMount() {\n    let {src, video, config, manager, isLive, autoPlay, actions} = this.props;\n\n    (require as any)(['flv.js'], (flvjs: any) => {\n      // load hls video source base on hls.js\n      if (flvjs.isSupported()) {\n        video = video || (manager.video && manager.video.video);\n\n        let flvPlayer = flvjs.createPlayer(\n          {\n            type: 'flv',\n            url: src,\n            isLive: isLive\n          },\n          config\n        );\n        flvPlayer.attachMediaElement(video);\n        this.flvPlayer = flvPlayer;\n        let loaded = false;\n        let timer: any;\n\n        manager.subscribeToOperationStateChange((operation: any) => {\n          const type = operation.operation.action;\n\n          if (type === 'play') {\n            clearTimeout(timer);\n            if (!loaded) {\n              loaded = true;\n              flvPlayer.load();\n            }\n\n            flvPlayer.play();\n          } else if (type === 'pause') {\n            flvPlayer.pause();\n\n            if (isLive) {\n              timer = setTimeout(() => {\n                actions.seek(0);\n                flvPlayer.unload();\n                loaded = false;\n              }, 30000);\n            }\n          }\n        });\n\n        flvPlayer.on(flvjs.Events.RECOVERED_EARLY_EOF, () => {\n          alert('直播已经结束');\n        });\n        flvPlayer.on(flvjs.Events.ERROR, () => {\n          alert('视频加载失败');\n        });\n\n        if (autoPlay) {\n          setTimeout(() => actions.play(), 200);\n        }\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    if (this.flvPlayer) {\n      this.flvPlayer.unload();\n      this.flvPlayer.detachMediaElement();\n    }\n  }\n\n  render() {\n    return (\n      <source src={this.props.src} type={this.props.type || 'video/x-flv'} />\n    );\n  }\n}\n\nexport interface HlsSourceProps {\n  src?: string;\n  type?: string;\n  video?: any;\n  config?: object;\n  manager?: any;\n  isLive?: boolean;\n  autoPlay?: boolean;\n  actions?: any;\n  order?: number;\n}\nexport class HlsSource extends React.Component<HlsSourceProps, any> {\n  hls: any;\n  componentDidMount() {\n    let {src, video, config, manager, isLive, autoPlay, actions} = this.props;\n\n    (require as any)(['hls.js'], (Hls: any) => {\n      // load hls video source base on hls.js\n      if (Hls.isSupported()) {\n        video = video || (manager.video && manager.video.video);\n\n        let hls = (this.hls = new Hls({\n          autoStartLoad: false\n        }));\n        hls.attachMedia(video);\n        hls.loadSource(src);\n\n        let loaded = false;\n\n        manager.subscribeToOperationStateChange((operation: any) => {\n          const type = operation.operation.action;\n\n          if (type === 'play') {\n            if (!loaded) {\n              loaded = true;\n              hls.startLoad();\n            }\n\n            video.play();\n          } else if (type === 'pause') {\n            video.pause();\n            hls.stopLoad();\n            loaded = false;\n          }\n        });\n\n        autoPlay && setTimeout(actions.play, 200);\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    if (this.hls) {\n      this.hls.stopLoad();\n      this.hls.detachMedia();\n    }\n  }\n\n  render() {\n    return (\n      <source\n        src={this.props.src}\n        type={this.props.type || 'application/x-mpegURL'}\n      />\n    );\n  }\n}\n\nexport interface VideoProps extends RendererProps {\n  className?: string;\n  columnsCount?: number;\n  isLive?: boolean;\n  jumpFrame?: boolean;\n  jumpBufferDuration?: number;\n  src?: string;\n}\n\nexport interface VideoState {\n  posterInfo?: any;\n  videoState?: any;\n}\n\nexport default class Video extends React.Component<VideoProps, VideoState> {\n  static defaultProps = {\n    columnsCount: 8,\n    isLive: false,\n    jumpFrame: true,\n    aspectRatio: 'auto'\n  };\n\n  frameDom: any;\n  cursorDom: any;\n  player: any;\n  times: Array<number>;\n  currentIndex: number;\n  constructor(props: VideoProps) {\n    super(props);\n\n    this.state = {\n      posterInfo: null,\n      videoState: {}\n    };\n\n    this.frameRef = this.frameRef.bind(this);\n    this.cursorRef = this.cursorRef.bind(this);\n    this.playerRef = this.playerRef.bind(this);\n    this.onImageLoaded = this.onImageLoaded.bind(this);\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onImageLoaded(e: Event) {\n    let image: any = new Image();\n    image.onload = () => {\n      this.setState({\n        posterInfo: {\n          width: image.width,\n          height: image.height\n        }\n      });\n      image = image.onload = null;\n    };\n    image.src = (e.target as HTMLElement).getAttribute('src');\n  }\n\n  frameRef(dom: any) {\n    this.frameDom = dom;\n  }\n\n  cursorRef(dom: any) {\n    this.cursorDom = dom;\n  }\n\n  playerRef(player: any) {\n    this.player = player;\n\n    if (!player) {\n      return;\n    }\n\n    player.subscribeToStateChange((state: any) => {\n      this.setState({\n        videoState: state\n      });\n\n      // if (!state.paused) {\n      //   if (\n      //     currentPlaying &&\n      //     currentPlaying.video &&\n      //     currentPlaying !== player\n      //   ) {\n      //     currentPlaying.pause();\n      //   }\n\n      //   currentPlaying = player;\n      // }\n\n      if (!this.frameDom || !this.times) {\n        return;\n      }\n\n      const jumpBufferDuration = this.props.jumpBufferDuration || 0;\n      let index = 0;\n      const times = this.times;\n      const len = times.length;\n      while (index < len - 1) {\n        if (\n          times[index + 1] &&\n          state.currentTime < times[index + 1] - jumpBufferDuration\n        ) {\n          break;\n        }\n\n        index++;\n      }\n\n      if (this.currentIndex !== index) {\n        this.moveCursorToIndex(index);\n      }\n    });\n  }\n\n  moveCursorToIndex(index: number) {\n    const {classPrefix: ns} = this.props;\n    if (!this.frameDom || !this.cursorDom) {\n      return;\n    }\n    const items = this.frameDom.querySelectorAll(`.${ns}Video-frame`);\n\n    if (items && items.length && items[index]) {\n      this.currentIndex = index;\n      const item = items[index];\n      const frameRect = this.frameDom.getBoundingClientRect();\n      const rect = item.getBoundingClientRect();\n      this.cursorDom.setAttribute(\n        'style',\n        `width: ${rect.width - 4}px; height: ${rect.height - 4}px; left: ${\n          rect.left + 2 - frameRect.left\n        }px; top: ${rect.top + 2 - frameRect.top}px;`\n      );\n    }\n  }\n\n  jumpToIndex(index: number) {\n    if (!this.times || !this.player || !this.props.jumpFrame) {\n      return;\n    }\n    const jumpBufferDuration = this.props.jumpBufferDuration || 0;\n    const times = this.times;\n    const player = this.player;\n\n    player.seek(times[index] - jumpBufferDuration);\n    player.play();\n  }\n\n  onClick(e: Event) {\n    // 避免把所在 form 给提交了。\n    e.preventDefault();\n  }\n\n  renderFrames() {\n    let {\n      frames,\n      framesClassName,\n      columnsCount,\n      data,\n      jumpFrame,\n      classPrefix: ns\n    } = this.props;\n\n    if (typeof frames === 'string' && frames[0] === '$') {\n      frames = resolveVariable(frames, data);\n    }\n\n    if (!frames) {\n      return null;\n    }\n\n    const items: Array<object> = [];\n    const times: Array<number> = (this.times = []);\n    Object.keys(frames).forEach(time => {\n      times.push(str2seconds(time));\n\n      items.push({\n        time: time,\n        src: frames[time]\n      });\n    });\n\n    if (!items.length) {\n      return null;\n    }\n\n    return (\n      <div\n        className={cx(`pos-rlt ${ns}Video-frameList`, framesClassName)}\n        ref={this.frameRef}\n      >\n        {padArr(items, columnsCount).map((items, i) => {\n          let restCount = (columnsCount as number) - items.length;\n          let blankArray = [];\n\n          while (restCount--) {\n            blankArray.push('');\n          }\n\n          return (\n            <div className=\"pull-in-xxs\" key={i}>\n              <div className={`${ns}Hbox ${ns}Video-frameItem`}>\n                {items.map((item, key) => (\n                  <div\n                    className={`${ns}Hbox-col Wrapper--xxs ${ns}Video-frame`}\n                    key={key}\n                    onClick={() =>\n                      this.jumpToIndex(i * (columnsCount as number) + key)\n                    }\n                  >\n                    {item.src ? (\n                      <img className=\"w-full\" alt=\"poster\" src={item.src} />\n                    ) : null}\n                    <div className={`${ns}Video-frameLabel`}>{item.time}</div>\n                  </div>\n                ))}\n\n                {\n                  /* 补充空白 */ restCount\n                    ? blankArray.map((_, index) => (\n                        <div\n                          className={`${ns}Hbox-col Wrapper--xxs`}\n                          key={`blank_${index}`}\n                        />\n                      ))\n                    : null\n                }\n              </div>\n            </div>\n          );\n        })}\n        {jumpFrame ? (\n          <span ref={this.cursorRef} className={`${ns}Video-cursor`} />\n        ) : null}\n      </div>\n    );\n  }\n\n  renderPlayer() {\n    let {\n      poster,\n      autoPlay,\n      muted,\n      name,\n      data,\n      amisConfig,\n      locals,\n      isLive,\n      minVideoDuration,\n      videoType,\n      playerClassName,\n      classPrefix: ns,\n      aspectRatio,\n      rates\n    } = this.props;\n\n    let source =\n      this.props.src ||\n      (name && data && (data as any)[name]) ||\n      (amisConfig && amisConfig.value);\n    const videoState = this.state.videoState;\n    let highlight =\n      videoState.duration &&\n      minVideoDuration &&\n      videoState.duration < minVideoDuration;\n    let src = filter(source, data, '| raw');\n    let sourceNode;\n\n    if (\n      (src && /\\.flv(?:$|\\?)/.test(src) && isLive) ||\n      videoType === 'video/x-flv'\n    ) {\n      sourceNode = (\n        <FlvSource\n          autoPlay={autoPlay}\n          order={999.0}\n          isLive={isLive}\n          src={src}\n        />\n      );\n    } else if (\n      (src && /\\.m3u8(?:$|\\?)/.test(src)) ||\n      videoType === 'application/x-mpegURL'\n    ) {\n      sourceNode = <HlsSource autoPlay={autoPlay} order={999.0} src={src} />;\n    } else {\n      sourceNode = <source src={src} />;\n    }\n\n    return (\n      <div className={playerClassName}>\n        <Player\n          ref={this.playerRef}\n          poster={filter(poster, data, '| raw')}\n          src={src}\n          autoPlay={autoPlay}\n          muted={muted}\n          aspectRatio={aspectRatio}\n        >\n          {rates && rates.length ? (\n            <ControlBar>\n              <PlaybackRateMenuButton rates={rates} order={7.1} />\n            </ControlBar>\n          ) : null}\n          <BigPlayButton position=\"center\" />\n          {sourceNode}\n          <Shortcut disabled />\n        </Player>\n\n        {highlight ? (\n          <p className={`m-t-xs ${ns}Text--danger`}>\n            视频时长小于 {minVideoDuration} 秒\n          </p>\n        ) : null}\n      </div>\n    );\n  }\n\n  renderPosterAndPlayer() {\n    let {poster, data, locals, minPosterDimension, classnames: cx} = this.props;\n    const posterInfo = this.state.posterInfo || {};\n    let dimensionClassName = '';\n\n    if (\n      posterInfo &&\n      minPosterDimension &&\n      (minPosterDimension.width || minPosterDimension.height) &&\n      (minPosterDimension.width > posterInfo.width ||\n        minPosterDimension.height > posterInfo.height)\n    ) {\n      dimensionClassName = `Text--danger`;\n    }\n\n    return (\n      <div className=\"pull-in-xs\">\n        <div className={cx('Hbox')}>\n          <div className={cx('Hbox-col')}>\n            <div className={cx('Wrapper Wrapper--xs')}>\n              <img\n                onLoad={this.onImageLoaded as any}\n                className=\"w-full\"\n                alt=\"poster\"\n                src={filter(poster, data, '| raw')}\n              />\n              <p className=\"m-t-xs\">\n                封面{' '}\n                <span className={dimensionClassName}>\n                  {posterInfo.width || '-'} x {posterInfo.height || '-'}\n                </span>\n                {dimensionClassName ? (\n                  <span>\n                    {' '}\n                    封面尺寸小于{' '}\n                    <span className={cx('Text--danger')}>\n                      {minPosterDimension.width || '-'} x{' '}\n                      {minPosterDimension.height || '-'}\n                    </span>\n                  </span>\n                ) : null}\n              </p>\n            </div>\n          </div>\n          <div className={cx('Hbox-col')}>\n            <div className={cx('Wrapper Wrapper--xs')}>\n              {this.renderPlayer()}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    let {splitPoster, className, classPrefix: ns} = this.props;\n\n    return (\n      <div\n        className={cx(`${ns}Video`, className)}\n        onClick={this.onClick as any}\n      >\n        {this.renderFrames()}\n        {splitPoster ? this.renderPosterAndPlayer() : this.renderPlayer()}\n      </div>\n    );\n  }\n}\n\n@Renderer({\n  test: /(^|\\/)video$/,\n  name: 'video'\n})\nexport class VideoRenderer extends Video {}\n"
    ]
}