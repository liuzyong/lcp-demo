{
    "version": 3,
    "file": "Editor.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Form/Editor.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {FormItem, FormControlProps} from './Item';\nimport LazyComponent from '../../components/LazyComponent';\nimport debouce from 'lodash/debounce';\nimport Editor from '../../components/Editor';\n\nexport interface EditorProps extends FormControlProps {\n  options?: object;\n}\n\nexport default class EditorControl extends React.Component<EditorProps, any> {\n  static defaultProps: Partial<EditorProps> = {\n    language: 'javascript',\n    editorTheme: 'vs',\n    options: {\n      automaticLayout: true,\n      selectOnLineNumbers: true,\n      scrollBeyondLastLine: false,\n      folding: true,\n      minimap: {\n        enabled: false\n      }\n    }\n  };\n\n  state = {\n    focused: false\n  };\n  editor: any;\n  toDispose: Array<Function> = [];\n  constructor(props: EditorProps) {\n    super(props);\n\n    this.handleFocus = this.handleFocus.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n    this.handleEditorMounted = this.handleEditorMounted.bind(this);\n    this.updateContainerSize = debouce(\n      this.updateContainerSize.bind(this),\n      250,\n      {\n        trailing: true,\n        leading: false\n      }\n    );\n    this.toDispose.push((this.updateContainerSize as any).cancel);\n  }\n\n  componentWillUnmount() {\n    this.toDispose.forEach(fn => fn());\n  }\n\n  handleFocus() {\n    this.setState({\n      focused: true\n    });\n  }\n\n  handleBlur() {\n    this.setState({\n      focused: false\n    });\n  }\n\n  handleEditorMounted(editor: any, monaco: any) {\n    this.editor = editor;\n    this.toDispose.push(\n      editor.onDidFocusEditorWidget(this.updateContainerSize).dispose\n    );\n    this.toDispose.push(\n      editor.onDidChangeModelContent(this.updateContainerSize).dispose\n    );\n    this.props.editorDidMount && this.props.editorDidMount(editor, monaco);\n  }\n\n  updateContainerSize() {\n    const editor = this.editor;\n    const parentDom = editor._domElement.parentNode;\n    const configuration = editor.getConfiguration();\n    const lineHeight = configuration.lineHeight;\n    const lineCount = editor.getModel().getLineCount();\n    const contentHeight = lineHeight * lineCount;\n    const horizontalScrollbarHeight =\n      configuration.layoutInfo.horizontalScrollbarHeight;\n    const editorHeight = contentHeight + horizontalScrollbarHeight;\n    parentDom.style.cssText = `height:${editorHeight}px`;\n  }\n\n  render() {\n    const {\n      className,\n      classPrefix: ns,\n      classnames: cx,\n      value,\n      onChange,\n      disabled,\n      options,\n      language,\n      editorTheme,\n      size\n    } = this.props;\n\n    let finnalValue = value;\n\n    if (finnalValue && typeof finnalValue !== 'string') {\n      finnalValue = JSON.stringify(finnalValue, null, 4);\n    }\n\n    return (\n      <div\n        className={cx(\n          `EditorControl`,\n          {\n            'is-focused': this.state.focused,\n            [`EditorControl--${size}`]: size\n          },\n          className\n        )}\n      >\n        <LazyComponent\n          classPrefix={ns}\n          component={Editor}\n          value={finnalValue}\n          onChange={onChange}\n          disabled={disabled}\n          onFocus={this.handleFocus}\n          onBlur={this.handleBlur}\n          language={language}\n          editorTheme={editorTheme}\n          editorDidMount={this.handleEditorMounted}\n          options={{\n            ...options,\n            readOnly: disabled\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport const availableLanguages = [\n  'bat',\n  'c',\n  'coffeescript',\n  'cpp',\n  'csharp',\n  'css',\n  'dockerfile',\n  'fsharp',\n  'go',\n  'handlebars',\n  'html',\n  'ini',\n  'java',\n  'javascript',\n  'json',\n  'less',\n  'lua',\n  'markdown',\n  'msdax',\n  'objective-c',\n  'php',\n  'plaintext',\n  'postiats',\n  'powershell',\n  'pug',\n  'python',\n  'r',\n  'razor',\n  'ruby',\n  'sb',\n  'scss',\n  'sol',\n  'sql',\n  'swift',\n  'typescript',\n  'vb',\n  'xml',\n  'yaml'\n];\n\nexport const EditorControls: Array<\n  typeof EditorControl\n> = availableLanguages.map((lang: string) => {\n  @FormItem({\n    type: `${lang}-editor`,\n    sizeMutable: false\n  })\n  class EditorControlRenderer extends EditorControl {\n    static lang = lang;\n    static displayName = `${lang[0].toUpperCase()}${lang.substring(\n      1\n    )}EditorControlRenderer`;\n    static defaultProps = {\n      ...EditorControl.defaultProps,\n      language: lang\n    };\n  }\n\n  return EditorControlRenderer;\n});\n\n@FormItem({\n  type: 'js-editor',\n  sizeMutable: false\n})\nclass JavascriptEditorControlRenderer extends EditorControl {\n  static defaultProps = {\n    ...EditorControl.defaultProps,\n    language: 'javascript'\n  };\n}\n\n@FormItem({\n  type: 'ts-editor',\n  sizeMutable: false\n})\nclass TypescriptEditorControlRenderer extends EditorControl {\n  static defaultProps = {\n    ...EditorControl.defaultProps,\n    language: 'typescript'\n  };\n}\n\n@FormItem({\n  type: `editor`,\n  sizeMutable: false\n})\nexport class EditorControlRenderer extends EditorControl {\n  static defaultProps = {\n    ...EditorControl.defaultProps,\n    language: 'javascript'\n  };\n}\n"
    ]
}